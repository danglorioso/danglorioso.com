---
interface Props {
  title: string;
  description: string;
  status: "completed" | "in-progress" | "planned" | "archived";
  technologies: string[];
  category: string;
  featured?: boolean;
  githubUrl?: string;
  liveUrl?: string;
  imageUrl?: string;
  favicon?: string;
  priority?: number;
  achievements?: string[];
  startDate: string;
  endDate?: string;
}

const { 
  title = "Project Title", 
  description = "Project description", 
  status = "in-progress", 
  technologies = [], 
  category = "Development", 
  featured = false,
  favicon,
  startDate = "2024-01-01",
  endDate 
} = Astro.props;

// Status styling
const statusConfig = {
  completed: { 
    bg: 'bg-green-500/20', 
    text: 'text-green-400', 
    border: 'border-green-500/30',
    label: 'Completed' 
  },
  'in-progress': { 
    bg: 'bg-blue-500/20', 
    text: 'text-blue-400', 
    border: 'border-blue-500/30',
    label: 'In Progress' 
  },
  planned: { 
    bg: 'bg-yellow-500/20', 
    text: 'text-yellow-400', 
    border: 'border-yellow-500/30',
    label: 'Planned' 
  },
  archived: { 
    bg: 'bg-gray-500/20', 
    text: 'text-gray-400', 
    border: 'border-gray-500/30',
    label: 'Archived' 
  }
};

const currentStatus = statusConfig[status] || statusConfig['in-progress'];
---

<article class="group bg-slate-900/80 backdrop-blur-lg border border-slate-700/50 rounded-lg p-4 hover:border-accent-primary/50 transition-all duration-200 cursor-pointer">
  <!-- Header with Favicon, Title and Status -->
  <div class="flex items-start justify-between mb-3">
    <div class="flex flex-1 items-start gap-3 min-w-0">
      <!-- Favicon -->
      {favicon && (
        <img 
          src={`/favicons/${favicon}`} 
          alt={`${title} favicon`}
          class="w-6 h-6 mt-1 flex-shrink-0 rounded-sm"
          loading="lazy"
          onerror="this.style.display='none'"
        />
      )}
      <h3 class="text-2xl font-semibold group-hover:text-accent-primary transition-colors line-clamp-2 flex-1">
        {title}
      </h3>
    </div>
    <span class={`px-2 py-1 rounded text-xs font-medium border ${currentStatus.bg} ${currentStatus.text} ${currentStatus.border} whitespace-nowrap ml-2 flex-shrink-0`}>
      {currentStatus.label}
    </span>
  </div>

  <!-- Description -->
  <p class="text-slate-300 text-sm leading-relaxed mb-4 line-clamp-3">
    {description}
  </p>

  <!-- Tech Stack (just first 3) -->
  <div class="flex flex-wrap gap-2 mb-4">
    {technologies.slice(0, 10).map((tech) => (
      <span class="px-2 py-1 bg-slate-800/60 text-slate-300 text-xs rounded border border-slate-600/50">
        {tech}
      </span>
    ))}
    {technologies.length > 10 && (
      <span class="px-2 py-1 text-slate-400 text-xs">
        +{technologies.length - 3} more
      </span>
    )}
  </div>

  <!-- Timeline -->
  <div class="text-xs text-slate-400">
    {new Date(startDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
    {endDate && ` â€” ${new Date(endDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}`}
  </div>
</article>
